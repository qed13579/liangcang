(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da885c06"],{"5ca3":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-wrapper user-add-page-wrapper"},[r("s-title",{attrs:{title:"add"==e.title?"新增控制箱":"编辑控制箱"}}),e._v(" "),r("div",{},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{staticClass:"form-item",attrs:{label:"廒间名称",prop:"granaryId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择廒间"},model:{value:e.form.granaryId,callback:function(t){e.$set(e.form,"granaryId",t)},expression:"form.granaryId"}},e._l(e.grainNamelist,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"控制箱名称",prop:"controlName"}},[r("el-input",{attrs:{placeholder:"控制箱名称"},model:{value:e.form.controlName,callback:function(t){e.$set(e.form,"controlName",t)},expression:"form.controlName"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"控制箱型号",prop:"controlModel"}},[r("el-input",{attrs:{placeholder:"控制箱型号"},model:{value:e.form.controlModel,callback:function(t){e.$set(e.form,"controlModel",t)},expression:"form.controlModel"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"控制箱编号",prop:"controlCode"}},[r("el-input",{attrs:{placeholder:"控制箱编号"},model:{value:e.form.controlCode,callback:function(t){e.$set(e.form,"controlCode",t)},expression:"form.controlCode"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"在线状态",prop:"granaryId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.online,callback:function(t){e.$set(e.form,"online",t)},expression:"form.online"}},e._l(e.onlinelist,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"控制箱ip",prop:"controlIp"}},[r("el-input",{attrs:{placeholder:"控制箱ip"},model:{value:e.form.controlIp,callback:function(t){e.$set(e.form,"controlIp",t)},expression:"form.controlIp"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{placeholder:"备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),r("el-button",{staticClass:"common-add-btn",attrs:{type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("保存")])],1),e._v(" "),r("el-dialog",{attrs:{title:"用户部门",visible:e.dialogDeptVisible},on:{"update:visible":function(t){e.dialogDeptVisible=t}}},[r("el-tree",{ref:"deptTree",staticClass:"filter-tree",attrs:{data:e.treeDeptData,"default-checked-keys":e.checkedKeys,"check-strictly":"","node-key":"id","highlight-current":"",props:e.defaultProps,"default-expand-all":""},on:{"node-click":e.getNodeData}})],1)],1)},o=[],l=(r("a450"),r("3616")),i=r("b405"),n=(r("61f7"),{props:["parentToChild"],name:"grainAdd",components:{STitle:i["default"]},filters:{},data:function(){return{listLoading:!1,title:"add",statusOptions:["0","1"],role:[],grainNamelist:[],treeDeptData:[],checkedKeys:[],onlinelist:[{value:0,label:"不在线"},{value:1,label:"在线"}],defaultProps:{children:"children",label:"name"},isDisabled:{0:!1,1:!0},dialogDeptVisible:!1,form:{controlCode:"",controlIp:"",controlModel:"",controlName:"",createTime:"",granaryId:null,granaryName:"",id:0,online:0,remark:"",userId:0,userName:""},rules:{controlName:[{required:!0,message:"请输入控制箱名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],controlModel:[{required:!0,message:"请输入控制箱型号",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],controlCode:[{required:!0,message:"请输入控制箱编号",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],controlIp:[{required:!0,message:"请输入控制箱ip",trigger:"blur"}],remark:[{max:50,message:"长度在50个字符内",trigger:"blur"}]}}},mounted:function(){var e=this;console.log(this.parentToChild);var t={isAsc:!1,limit:1e3,name:"",orderByField:"",page:0};l["q"](t).then((function(t){console.log("粮库列表",t),e.grainNamelist=t.data.records})),this.$route.meta.title="新增粮库",this.parentToChild&&(this.title="update",this.$route.meta.title="编辑粮库",this.handleUpdate(this.parentToChild))},methods:{handleAdd:function(){var e=this,t=this;this.$refs.form.validate((function(r){r&&(e.listLoading=!0,"add"==e.title?(console.log(e.form),l["e"](e.form).then((function(r){e.listLoading=!1,"1"==r.data.code?(e.$notify({message:"创建失败,"+r.data.msg,type:"error",duration:"2000"}),t.$emit("msg",!1)):"0"==r.data.code&&(e.$notify({message:"创建成功",type:"success",duration:"2000"}),e.resetTemp(),t.$emit("msg",!0))}))):(e.form.password=void 0,l["e"](e.form).then((function(r){e.listLoading=!1,"1"==r.data.code?(e.$notify({message:"修改失败,"+r.data.msg,type:"error",duration:"2000"}),t.$emit("msg",!1)):"0"==r.data.code&&(e.$notify({message:"修改成功",type:"success",duration:"2000"}),t.$emit("msg",!0))}))))}))},resetTemp:function(){this.form={controlCode:"",controlIp:"",controlModel:"",controlName:"",createTime:"",granaryId:null,granaryName:"",id:0,online:0,remark:"",userId:0,userName:""},this.role=[]},getNodeData:function(e){this.dialogDeptVisible=!1,this.form.deptId=e.id,this.form.deptName=e.name},handleUpdate:function(e){var t=this;l["k"](e).then((function(e){t.form=e.data}))}}}),s=n,d=(r("5e8b"),r("f771"),r("0b56")),c=Object(d["a"])(s,a,o,!1,null,"d1814048",null);t["default"]=c.exports},"5e8b":function(e,t,r){"use strict";r("6da7")},"62a9":function(e,t,r){},"6da7":function(e,t,r){},a24f:function(e,t,r){"use strict";r("62a9")},a2b3:function(e,t,r){},b405:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-component-wrapper title-component-wrapper"})},o=[],l={props:{title:{type:String,default:"title"}}},i=l,n=(r("a24f"),r("0b56")),s=Object(n["a"])(i,a,o,!1,null,"238b1a96",null);t["default"]=s.exports},f771:function(e,t,r){"use strict";r("a2b3")}}]);